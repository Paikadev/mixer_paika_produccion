<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

     <!-- Voxeet SDK and jQuery the CDN unpkg.com -->
     <script type="text/javascript" src="https://unpkg.com/@voxeet/voxeet-web-sdk@3.4"></script>
     <script type="text/javascript" src="https://unpkg.com/jquery"></script>
     
     <!-- Mixer layout script and styles -->
     <script type="text/javascript" src="script.js"></script>
     <script type="text/javascript" src="events.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div class="hide">
        <input type="hidden" value="accessToken" id="accessToken" name="accessToken" />
        <input type="hidden" value="refreshToken" id="refreshToken" name="refreshToken" />
        <input type="hidden" value="refreshUrl" id="refreshUrl" name="refreshUrl" />
        <input type="hidden" value="catToken" id="catToken" name="catToken" />
        <input type="hidden" value="voxeet" id="conferenceId" name="conferenceId" />
        <input type="hidden" value="1234" id="thirdPartyId" name="thirdPartyId" />
        <input type="hidden" value="stream" id="layoutType" name="layoutType" />
        <button id="joinConference">Join conference</button>
        <button id="replayConference">Replay conference</button>
    </div>







    <div id="blueDiv"></div>
    <div id="greenDiv"></div>
    <div id="redDivContainer">
        <div class="redDiv">
            <img src="image.jpg" alt="Image" style="width: 200px;">
        </div>
        <div class="redDiv videos-container">
            <p>Camara</p>
        </div>
        <div class="redDiv">
            <div id="textPrompt"></div>
            <div id="timerPrompt"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        var socket = io.connect('http://13.52.68.186:9000');

        var lobbyShow = true;


        socket.on('connect', function () {
            console.log('conectado!')
            socket.emit('join', "222");
            document.getElementById('greenDiv').style.display = 'none';
            document.getElementById('blueDiv').style.display = 'block';
            document.querySelectorAll('.redDiv').forEach(div => {
                div.style.display = 'none';
            });
        })
        socket.on('text', function (response) {
            console.log(response['text'])
            if (response['text'] != "...") {
                document.getElementById('textPrompt').innerHTML = response['text'];

            }
        });
        socket.on('timer', function (response) {
            document.getElementById('timerPrompt').innerHTML = response['timer'];
        });

        socket.on('start', function (response) {
            console.log("Start param")
            console.log(response['start'])
            if (lobbyShow === true) {
                if (response['start'] === 0) {
                    document.getElementById('blueDiv').style.display = 'block';
                    document.querySelectorAll('.redDiv').forEach(div => {
                        div.style.display = 'none';
                    });
                } else if (response['start'] === 1) {
                    document.getElementById('blueDiv').style.display = 'none';
                    document.querySelectorAll('.redDiv').forEach(div => {
                        div.style.display = 'block';
                    });
                }

                lobbyShow = false
            }

            console.log("lobby state")
            console.log(lobbyShow)
        });
    </script>
</body>

</html>